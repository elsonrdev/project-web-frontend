<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Academy - Plataforma de Cursos Online</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="images/logo.png" alt="Tech Academy Logo">
            </div>
            <div class="nav-links">
                <a href="#inicio">Início</a>
                <a href="#cursos">Cursos</a>
                <a href="#planos">Planos de estudo</a>
            </div>
            <div class="nav-buttons">
                <button id="loginBtn" class="btn-secondary">Entrar</button>
                <button id="registerBtn" class="btn-primary">Cadastrar</button>
                <div id="userMenu" style="display: none;">
                    <button id="profileBtn" class="btn-secondary">Meu Perfil</button>
                    <button id="logoutBtn" class="btn-secondary">Sair</button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="hero-content">
                <h1>Mergulhe no mundo<br>da tecnologia</h1>
                <p>Uma plataforma que irá guiar você pelo mundo da tecnologia. A nossa plataforma 
                   oferece cursos intensivos que vão desde o básico até o avançado. Venha 
                   fazer parte da transformação digital e desenvolva suas habilidades.</p>
                <button class="btn-primary">Saiba mais</button>
            </div>
            <div class="hero-image">
                <img src="images/vr-image.png" alt="Realidade Virtual">
            </div>
        </section>

        <section class="como-funciona">
            <h2>COMO FUNCIONA A<br>TECH ACADEMY</h2>
            <div class="content-wrapper">
                <div class="image-container">
                    <img src="images/classroom.png" alt="Sala de aula Tech Academy">
                </div>
                <div class="text-content">
                    <h3>SOBRE A<br>TECH ACADEMY</h3>
                    <p>Entre em uma das áreas mais promissoras do mundo. Não importa nada técnico, 
                       você pode começar do zero. Através de aprendizado estruturado, oferecemos 
                       todo o suporte necessário para sua evolução. Aprenda com quem está no mercado 
                       e receba mentorias ao vivo para tirar suas dúvidas e acelerar sua carreira.</p>
                </div>
            </div>
        </section>

        <section class="features">
            <h2>Todas as vantagens de ser nosso aluno em um só lugar</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3>MERCADO DE TRABALHO</h3>
                    <p>Aprenda com profissionais do mercado e esteja preparado para os desafios reais.</p>
                    <button class="feature-btn">Saiba mais</button>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-laptop-code"></i>
                    </div>
                    <h3>AULAS PRÁTICAS</h3>
                    <p>Aprenda na prática com projetos reais e construa seu portfólio profissional.</p>
                    <button class="feature-btn">Saiba mais</button>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>MENTORIA INDIVIDUAL</h3>
                    <p>Receba suporte personalizado para acelerar seu desenvolvimento.</p>
                    <button class="feature-btn">Saiba mais</button>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h3>CERTIFICAÇÃO</h3>
                    <p>Obtenha certificados reconhecidos pelo mercado de trabalho.</p>
                    <button class="feature-btn">Saiba mais</button>
                </div>
            </div>
        </section>

        <section class="forms-section">
            <div class="register-form">
                <h2>CADASTRE-SE</h2>
                <p>VAMOS JUNTOS CONQUISTAR SEU FUTURO</p>
                <form id="registerFormMain" onsubmit="handleRegister(event)">
                    <input type="text" id="registerNameMain" placeholder="Nome" required>
                    <input type="email" id="registerEmailMain" placeholder="Email" required>
                    <input type="tel" id="registerPhoneMain" placeholder="Telefone" required>
                    <input type="password" id="registerPasswordMain" placeholder="Senha" required>
                    <button type="submit" class="submit-btn">Cadastrar</button>
                </form>
            </div>

            <div class="login-form">
                <h2>LOGIN</h2>
                <p>VAMOS JUNTOS CONQUISTAR SEU FUTURO</p>
                <form id="loginFormMain" onsubmit="handleLogin(event)">
                    <input type="email" id="loginEmailMain" placeholder="Email" required>
                    <input type="password" id="loginPasswordMain" placeholder="Senha" required>
                    <button type="submit" class="submit-btn">Entrar</button>
                </form>
            </div>
        </section>

        <section class="courses-slider">
            <h2>NOSSOS CURSOS</h2>
            <div class="slider-container">
                <div class="course-card">
                    <img src="images/python-course.png" alt="Curso de Python">
                    <h3>Python</h3>
                </div>
                <div class="course-card">
                    <img src="images/java-course.webp" alt="Curso de Java">
                    <h3>Java</h3>
                </div>
                <div class="course-card">
                    <img src="images/web-course.webp" alt="Desenvolvimento Web">
                    <h3>Web Dev</h3>
                </div>
                <div class="course-card">
                    <img src="images/data-course.png" alt="Ciência de Dados">
                    <h3>Data Science</h3>
                </div>
            </div>
            <button class="btn-secondary slider-prev">‹</button>
            <button class="btn-secondary slider-next">›</button>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="images/logo.png" alt="Tech Academy Logo">
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Empresa</h4>
                    <a href="#">Sobre nós</a>
                    <a href="#">Carreiras</a>
                    <a href="#">Contato</a>
                </div>
                <div class="footer-column">
                    <h4>Cursos</h4>
                    <a href="#">Programação</a>
                    <a href="#">Data Science</a>
                    <a href="#">UX/UI Design</a>
                </div>
                <div class="footer-column">
                    <h4>Social</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Tech Academy. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Modal de Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Senha</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="btn-primary">Entrar</button>
            </form>
        </div>
    </div>

    <!-- Modal de Registro -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <h2>Cadastro</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Nome</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">Telefone</label>
                    <input type="tel" id="registerPhone" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Senha</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <button type="submit" class="btn-primary">Cadastrar</button>
            </form>
        </div>
    </div>

    <!-- Modal de Perfil -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <h2>Meu Perfil</h2>
            <form id="profileForm">
                <div class="form-group">
                    <label for="profileName">Nome</label>
                    <input type="text" id="profileName" required>
                </div>
                <div class="form-group">
                    <label for="profileEmail">Email</label>
                    <input type="email" id="profileEmail" required>
                </div>
                <div class="form-group">
                    <label for="profilePhone">Telefone</label>
                    <input type="tel" id="profilePhone" required>
                </div>
                <button type="submit" class="btn-primary">Atualizar Perfil</button>
            </form>
            <button id="changePasswordBtn" class="btn-secondary">Alterar Senha</button>
        </div>
    </div>

    <!-- Modal de Alteração de Senha -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <h2>Alterar Senha</h2>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Senha Atual</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Nova Senha</label>
                    <input type="password" id="newPassword" required>
                </div>
                <button type="submit" class="btn-primary">Alterar Senha</button>
            </form>
        </div>
    </div>

    <script>
        // Elementos do DOM
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const userMenu = document.getElementById('userMenu');
        const profileBtn = document.getElementById('profileBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const profileModal = document.getElementById('profileModal');
        const changePasswordModal = document.getElementById('changePasswordModal');
        const changePasswordBtn = document.getElementById('changePasswordBtn');

        // Formulários
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const profileForm = document.getElementById('profileForm');
        const changePasswordForm = document.getElementById('changePasswordForm');

        // Funções auxiliares
        function showModal(modal) {
            modal.style.display = 'block';
        }

        function hideModal(modal) {
            modal.style.display = 'none';
        }

        function showUserMenu() {
            loginBtn.style.display = 'none';
            registerBtn.style.display = 'none';
            userMenu.style.display = 'flex';
        }

        function hideUserMenu() {
            loginBtn.style.display = 'block';
            registerBtn.style.display = 'block';
            userMenu.style.display = 'none';
        }

        // Event Listeners para os botões
        loginBtn.addEventListener('click', () => showModal(loginModal));
        registerBtn.addEventListener('click', () => showModal(registerModal));
        profileBtn.addEventListener('click', () => showModal(profileModal));
        changePasswordBtn.addEventListener('click', () => showModal(changePasswordModal));

        // Fechar modais ao clicar fora
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) hideModal(loginModal);
            if (e.target === registerModal) hideModal(registerModal);
            if (e.target === profileModal) hideModal(profileModal);
            if (e.target === changePasswordModal) hideModal(changePasswordModal);
        });

        // Funções de API
        async function registerUser(userData) {
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message);
                }

                const data = await response.json();
                localStorage.setItem('token', data.token);
                showUserMenu();
                hideModal(registerModal);
                alert('Cadastro realizado com sucesso!');
            } catch (error) {
                alert(error.message);
            }
        }

        async function loginUser(credentials) {
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(credentials)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message);
                }

                const data = await response.json();
                localStorage.setItem('token', data.token);
                showUserMenu();
                hideModal(loginModal);
                alert('Login realizado com sucesso!');
            } catch (error) {
                alert(error.message);
            }
        }

        async function updateProfile(profileData) {
            try {
                const response = await fetch('/api/users/profile', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify(profileData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message);
                }

                hideModal(profileModal);
                alert('Perfil atualizado com sucesso!');
            } catch (error) {
                alert(error.message);
            }
        }

        async function changePassword(passwordData) {
            try {
                const response = await fetch('/api/users/change-password', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify(passwordData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message);
                }

                hideModal(changePasswordModal);
                alert('Senha alterada com sucesso!');
            } catch (error) {
                alert(error.message);
            }
        }

        function logout() {
            localStorage.removeItem('token');
            hideUserMenu();
        }

        // Event Listeners para os formulários
        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const userData = {
                name: document.getElementById('registerName').value,
                email: document.getElementById('registerEmail').value,
                phone: document.getElementById('registerPhone').value,
                password: document.getElementById('registerPassword').value
            };
            registerUser(userData);
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const credentials = {
                email: document.getElementById('loginEmail').value,
                password: document.getElementById('loginPassword').value
            };
            loginUser(credentials);
        });

        profileForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const profileData = {
                name: document.getElementById('profileName').value,
                email: document.getElementById('profileEmail').value,
                phone: document.getElementById('profilePhone').value
            };
            updateProfile(profileData);
        });

        changePasswordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const passwordData = {
                currentPassword: document.getElementById('currentPassword').value,
                newPassword: document.getElementById('newPassword').value
            };
            changePassword(passwordData);
        });

        logoutBtn.addEventListener('click', logout);

        // Verificar se o usuário está logado ao carregar a página
        window.addEventListener('load', () => {
            const token = localStorage.getItem('token');
            if (token) {
                showUserMenu();
            }
        });
    </script>
</body>
</html> 